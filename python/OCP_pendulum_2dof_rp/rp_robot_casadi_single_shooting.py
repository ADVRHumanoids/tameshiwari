"""
Created on Tue Oct  8 14:36:50 2019

@author: user
"""

import rospy
import tameshiwari.pynocchio_casadi as pyn
from casadi import *

urdf = rospy.get_param('robot_description')
fk_string = pyn.generate_forward_kin(urdf, 'L02')
#fk_string = 'Sn18forward_kinematicsi1:1qsp6x1n6:0:1:2:3:4:5:0:6so2:6ee_pos6ee_rotsp3x1n3:0:1:2:0:3ssp3x3n9:0:1:2:0:1:2:0:1:2:0:3:6:9sw30iw0a223c0:4599976659396224614i1:0:0u13:2:1c3:-4806154894288143639u14:1:1b3:4:3:1b1:4:2:4c5:4437603778375450624i6:0:1u14:7:6b3:8:5:7b3:9:4:8b3:10:3:2b2:10:10:1u13:6:6b3:11:10:6b2:9:9:11b3:11:0:9c12:4599202040260316889c13:-4975467343216902144i14:0:2u13:15:14b3:16:9:15c17:4417217142566632169u14:14:14b3:18:17:14b3:19:4:18b2:16:16:19b3:10:10:7b3:19:5:6b3:20:4:19b1:10:10:20b3:20:10:14b2:16:16:20b3:20:13:16b3:21:10:15b3:9:9:14b3:22:17:15b3:23:4:22b1:9:9:23b1:21:21:9c9:-4785768395918278656b3:10:3:10b1:10:10:4b3:4:9:10b1:4:21:4b1:20:20:4b3:4:12:20b1:11:11:4o11:0:0b3:11:17:2b1:11:11:1b3:4:11:18b3:17:17:1b2:17:17:2b3:2:17:6b3:8:11:8b1:2:2:8b3:8:2:15b2:4:4:8b3:17:17:7b3:19:11:19b2:17:17:19b3:19:17:14b2:4:4:19b3:19:13:4b3:8:17:15b3:1:2:14b3:23:11:22b1:1:1:23b2:8:8:1b3:17:3:17b2:17:17:11b3:11:9:17b1:11:8:11b1:19:19:11b3:11:12:19b3:2:0:2b2:11:11:2o11:0:1c11:4598362569289775029b3:0:0:7b1:11:11:0b3:0:7:15b3:18:5:18b1:0:0:18b3:18:6:14b2:0:0:18b3:13:13:0b3:15:6:15b3:7:7:14b3:22:5:22b2:7:7:22b1:15:15:7b3:3:3:6c6:-4785768258479325184b1:3:3:6b3:6:9:3b1:6:15:6b1:13:13:6b3:12:12:13b1:11:11:12o11:0:2c11:4417217142566632168i12:0:3u13:6:12b3:7:11:6u14:12:12b2:7:7:12b3:22:16:7c14:4174836854572449792b3:18:14:12b3:2:5:6b1:18:18:2b3:2:21:18b3:1:11:12b1:1:1:6b3:23:10:1b1:2:2:23b1:22:22:2c2:4247904693637873664i23:0:4u13:24:23b3:25:2:24u14:23:23b2:25:25:23b3:26:22:25b3:27:11:12b1:27:6:27b3:16:16:27b3:28:5:12b3:14:14:6b2:28:28:14b3:21:21:28b3:11:11:6b2:12:12:11b3:10:10:12b1:21:21:10b1:16:16:21c21:-4806154894288143640b3:10:21:23b3:11:9:24b1:10:10:11b3:11:16:10c6:-5048535182282326016b3:14:6:23b1:14:14:24b3:29:20:14b1:11:11:29b1:26:26:11o26:1:0b3:26:4:7b3:11:8:18b3:29:17:1b1:11:11:29b1:26:26:11b3:11:26:25b3:4:4:27b3:8:8:28b3:17:17:12b1:8:8:17b1:4:4:8b3:8:4:10b3:17:19:14b1:8:8:17b1:11:11:8o11:1:1b3:7:0:7b3:18:15:18b3:1:3:1b1:18:18:1b1:7:7:18b3:25:7:25b3:0:0:27b3:15:15:28b3:3:3:12b1:15:15:3b1:0:0:15b3:10:0:10b3:14:13:14b1:10:10:14b1:25:25:10o25:1:2b3:2:2:23b1:2:24:2b3:25:22:2b3:9:9:23b3:10:21:24b2:9:9:10b3:10:16:9b3:6:6:24b2:23:23:6b3:6:20:23b1:10:10:6b1:25:25:10o25:1:3b3:25:26:2b3:10:4:9b3:6:19:23b1:10:10:6b1:25:25:10o25:1:4b3:2:7:2b3:9:0:9b3:23:13:23b1:9:9:23b1:2:2:9o2:1:5b3:22:21:22b3:20:5:20b1:16:16:20b1:22:22:16o22:1:6b3:26:21:26b3:19:5:19b1:4:4:19b1:26:26:4o26:1:7b3:21:21:7b3:5:5:13b1:0:0:5b1:21:21:0o21:1:8'

print fk_string

fk = Function.deserialize(fk_string)

q = MX.sym('q', 2)
x = fk(q=q)['ee_pos']



print(x)

print fk

